/**
 * @file    bloque.c
 * @brief   Contiene las funciones de dibujado de los bloques.
 *
 * @author      Alejandro Lara Do침a - alejandro.lara@uca.es | Eduardo Romero
 * @date        2014/2025
 * @version     2.0
 *
 * @copyright   GNU General Public License version 3 or later
 */

#include "bloque.h"
#include "tipos.h"
#include "glcd.h"

// ===== Bloque - Constantes Privadas =====
/**
 * @brief   Constante que contiene un patr칩n para que los bloques no sean de color uniforme y
 * parezcan tridimensionales.
 * @ingroup Bloque
 */
static const uint16_t definicion_bloque[BLOQUE_TAMANO][BLOQUE_TAMANO] ={
    {0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF},
    {0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0x7BEF},
    {0xFFFF, 0xFFFF, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0x7BEF, 0x7BEF},
    {0xFFFF, 0xFFFF, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0x7BEF, 0x7BEF},
    {0xFFFF, 0xFFFF, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0x7BEF, 0x7BEF},
    {0xFFFF, 0xFFFF, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0x7BEF, 0x7BEF},
    {0xFFFF, 0xFFFF, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0x7BEF, 0x7BEF},
    {0xFFFF, 0xFFFF, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0x7BEF, 0x7BEF},
    {0xFFFF, 0xFFFF, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0x7BEF, 0x7BEF},
    {0xFFFF, 0xFFFF, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0x7BEF, 0x7BEF},
    {0xFFFF, 0xFFFF, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0x7BEF, 0x7BEF},
    {0xFFFF, 0xFFFF, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0x7BEF, 0x7BEF},
    {0xFFFF, 0xFFFF, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0xC618, 0x7BEF, 0x7BEF},
    {0xFFFF, 0x7BEF, 0x7BEF, 0x7BEF, 0x7BEF, 0x7BEF, 0x7BEF, 0x7BEF, 0x7BEF, 0x7BEF, 0x7BEF, 0x7BEF, 0x7BEF, 0x7BEF, 0x7BEF},
    {0x7BEF, 0x7BEF, 0x7BEF, 0x7BEF, 0x7BEF, 0x7BEF, 0x7BEF, 0x7BEF, 0x7BEF, 0x7BEF, 0x7BEF, 0x7BEF, 0x7BEF, 0x7BEF, 0x7BEF},
};

/**
 * @brief   Pinta un bloque de `BLOQUE_TAMANO` con la esquina superior izquierda indicada por las
 * posiciones `x` e `y`.
 * @ingroup Bloque
 *
 * @param[in] x       Posici칩n x del bloque.
 * @param[in] y       Posici칩n y del bloque.
 * @param[in] color   Color del bloque.
 */
void bloque_pintar(uint16_t x, uint16_t y, uint16_t color) {
  uint8_t i, j;

  for (i = 0; i < BLOQUE_TAMANO; i++) {
    for (j = 0; j < BLOQUE_TAMANO; j++) {
      uint16_t c = definicion_bloque[i][j] & color;
      glcd_punto(x + j, y + i, c);
    }
  }
}
